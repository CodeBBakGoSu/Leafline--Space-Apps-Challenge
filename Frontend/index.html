<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>BloomBee</title>
        <script
            src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>
        <link rel="stylesheet" href="css/font.css" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/index.css" />
        <link rel="stylesheet" href="css/todoList.css" />
        <link rel="stylesheet" href="css/chat.css" />
        <link rel="styleshhet" href="css/community.css" />
        <link rel="icon" type="image/png" href="img/logo/favicon.png" />
    </head>
    <body>
        <div class="page-wrap">
            <div class="nav-wrap">
                <div class="nav">
                    <!-- Î©îÎâ¥ ÏÑ†ÌÉù Î∞î Î™®Ïñë Ï†ÅÏö© ÏãúÏûë -->
                    <div class="nav-honey">

                    </div>
                    <!-- Î©îÎâ¥ ÏÑ†ÌÉù Î∞î Î™®Ïñë Ï†ÅÏö© ÎÅù -->
                    <div class="logo">
                        <img src="img/logo/logo_small.png" class="logo-img" width="150px" />
                    </div>
                    <div class="menu">
                        <div class="menu-item" data-page="dashboard">
                            <div class="menu-img">
                                <img src="img/icon_common/icon_nav_dashboard_gray.png" width="40px" />
                            </div>
                            <div class="menu-text font-m">Dashboard</div>
                        </div>
                        <div class="menu-item" data-page="calendar">
                            <div class="menu-img">
                                <img src="img/icon_common/icon_nav_calendar_gray.png" width="40px" />
                            </div>
                            <div class="menu-text font-m">Calendar</div>
                        </div>
                        <div class="menu-item" data-page="community">
                            <div class="menu-img">
                                <img src="img/icon_common/icon_nav_community_gray.png" width="40px" />
                            </div>
                            <div class="menu-text font-m">Community</div>
                        </div>
                        <div class="menu-item" data-page="setting">
                            <div class="menu-img">
                                <img src="img/icon_common/icon_nav_setting_gray.png" width="40px" />
                            </div>
                            <div class="menu-text font-m">Setting</div>
                        </div>
                    </div>
                </div>
                <div class="chatbot-wrap">
                    <div class="chatbot">
                        <div class="chatbot-item">
                            <div class="line">
                                <hr width="140px" />
                            </div>
                            <div class="chatbot-menu" data-page="chatbot">
                                <div class="menu-img">
                                    <img src="img/icon_common/icon_nav_chatbot_gray.png" width="40px" />
                                </div>
                                <div class="menu-text font-m">Bloom Ai</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="dBody">
            <div class="body-container">
                <!-- ÏÉÅÎã® 8%: Ïù∏ÏÇ¨Îßê + ÏúÑÏπò + ÏïåÎ¶º -->
                <header class="header-section">
                    <div class="greeting-group">
                        <h1 class="greeting-text">Good morning, Alex üëã</h1>
                        <div class="location-info">
                            <img
                                src="img/icon_common/icon_location_small_gray.png"
                                alt="location"
                                width="16"
                                height="16" />
                            <span>Alex's Honey ‚Ä¢ Orlando, FL</span>
                        </div>
                    </div>
                    <div class="notification-icon">
                        <img src="img/icon_common/icon_notification.png" alt="notification" width="20" height="20" />
                    </div>
                </header>

                <!-- Ï§ëÎã® 25%: Todo 60% + Weather 40% -->
                <section class="middle-section">
                    <div class="todo-section">
                        <div class="todo-frame-wrapper">
                            <iframe
                                class="todo-frame"
                                src="pages/todoList.html"
                                title="Daily to do list"
                                loading="lazy"></iframe>
                        </div>
                    </div>
                    <div class="weather-section">
                        <div class="weather-frame-wrapper">
                            <iframe
                                class="weather-frame"
                                src="pages/weather.html"
                                title="Weather information"
                                loading="lazy"></iframe>
                        </div>
                    </div>
                </section>

                <!-- ÌïòÎã® 67%: Dashboard / Calendar -->
                <section class="bottom-section">
                    <span class="view-label">Dashboard / Calendar</span>
                    <div class="frame-wrapper">
                        <iframe
                            id="contentFrame"
                            class="scaled-frame"
                            src="pages/dashboard.html"
                            title="BloomBee content"
                            loading="lazy"></iframe>
                    </div>
                </section>
            </div>
        </div>

        <!-- Ï±óÎ¥á Î™®Îã¨ -->
        <div id="chatModal" class="chat-modal hidden">
            <!-- Ï±ÑÌåÖ Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="chat-container">
                <!-- Ìó§Îçî -->
                <div class="chat-header">
                    <div class="chat-logo">
                        <img src="img/chatting/Chatting logo.png" alt="Bloom AI" />
                    </div>
                    <div class="chat-header-buttons">
                        <div class="chat-menu">
                            <img src="img/chatting/icon_hamburger.png" alt="menu" />
                        </div>
                        <div class="chat-close" id="chatClose">
                            <span>‚úï</span>
                        </div>
                    </div>
                </div>

                <!-- Î©îÏãúÏßÄ ÏòÅÏó≠ -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Î©îÏãúÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                </div>

                <!-- ÏûÖÎ†• ÏòÅÏó≠ -->
                <div class="chat-input-container">
                    <input type="text" id="chatInput" class="chat-input" placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." />
                    <button id="sendButton" class="send-button" disabled>
                        <img id="sendIcon" src="img/chatting/icon_send_gray.png" alt="send" />
                    </button>
                </div>
            </div>
        </div>

        <script src="js/index.js"></script>
        <script src="js/chat.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const menuItems = document.querySelectorAll(".menu-item, .chatbot-menu");
                const contentFrame = document.getElementById("contentFrame");
                const frameScale = {
                    dashboard: 0.8,
                    calendar: 0.8,
                };

                function setMenuActive(targetPage) {
                    document.querySelectorAll(".menu-item").forEach((item) => {
                        const isActive = item.getAttribute("data-page") === targetPage;
                        item.classList.toggle("active", isActive);
                    });
                }

                function switchContent(page) {
                    // Ïª§ÎÆ§ÎãàÌã∞ ÌéòÏù¥Ïßà Í≤ΩÏö∞, ÎØ∏Îì§ ÏÑ∏ÏÖò Ïà®Í∏∞Í∏∞
                    if(page == "community") {
                        document.querySelector(".middle-section").style.display = "none";
                        document.querySelector(".view-label").style.display = "none";
                        document.querySelector(".bottom-section").style.height = "100%";
                    } else {
                        document.querySelector(".middle-section").style.display = "flex";
                    }
                    switch (page) {
                        case "dashboard":
                            contentFrame.src = "pages/dashboard.html";
                            break;
                        case "calendar":
                            contentFrame.src = "pages/calendar.html";
                            break;
                        case "community":
                            contentFrame.src = "pages/community.html";
                            break;
                        case "setting":
                            alert("Setting ÌéòÏù¥ÏßÄÎäî Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.");
                            return;
                        case "chatbot":
                            openChatModal();
                            return;
                        default:
                            contentFrame.src = "pages/dashboard.html";
                    }

                    const scale = frameScale[page] || frameScale.dashboard;
                    contentFrame.style.setProperty("--frame-scale", scale);
                    setMenuActive(page);
                }

                menuItems.forEach((item) => {
                    item.style.cursor = "pointer";
                    item.addEventListener("click", () => {
                        switchContent(item.getAttribute("data-page"));
                    });
                });

                // Ï¥àÍ∏∞ ÏÉÅÌÉú ÏÑ§Ï†ï
                contentFrame.style.setProperty("--frame-scale", frameScale.dashboard);
                setMenuActive("dashboard");
                
                // ÌéòÏù¥ÏßÄ Ï†ÑÏ≤¥Î•º 80%Î°ú Ï∂ïÏÜå
                document.body.style.zoom = "0.9";
            });
        </script>
    </body>
</html>
